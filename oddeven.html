<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Odd or Even Cricket</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0; padding: 0;
      font-family: 'Courier New', monospace;
    }

    body {
      background: black;
      color: lime;
      padding: 10px;
      text-align: center;
    }

    h1 {
      font-size: 1.7rem;
      margin-bottom: 10px;
      text-shadow: 1px 1px 2px #0f0;
    }

    .scoreboard {
      margin: 10px 0;
      font-size: 1rem;
      line-height: 1.5;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 15px 0;
      gap: 10px;
    }

    .buttons button {
      width: 22vw;
      max-width: 60px;
      height: 60px;
      font-size: 1.5rem;
      background: lime;
      color: black;
      border: 2px solid #0f0;
      border-radius: 8px;
      cursor: pointer;
    }

    .log {
      min-height: 60px;
      font-size: 1rem;
      margin-top: 10px;
    }

    .result {
      font-size: 1.4rem;
      color: yellow;
      margin-top: 15px;
    }

    .popup {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.95);
      color: yellow;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      z-index: 999;
    }

    .popup h2 {
      font-size: 1.5rem;
      margin-bottom: 10px;
    }

    .popup select, .popup button {
      margin: 8px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 6px;
    }

    .hidden {
      display: none;
    }

    @media (max-width: 480px) {
      h1 { font-size: 1.4rem; }
      .buttons button { width: 18vw; height: 50px; font-size: 1.2rem; }
    }
  </style>
</head>
<body>
  <h1>üèè Odd or Even Cricket üïπÔ∏è</h1>

  <div class="scoreboard" id="status">Waiting for toss...</div>

  <div class="scoreboard" id="scorecard">
    Player: 0/0 (0.0 overs)<br>
    Computer Thala: 0/0 (0.0 overs)
  </div>

  <div class="buttons">
    <button onclick="playTurn(1)">1</button>
    <button onclick="playTurn(2)">2</button>
    <button onclick="playTurn(3)">3</button>
    <button onclick="playTurn(4)">4</button>
    <button onclick="playTurn(5)">5</button>
    <button onclick="playTurn(6)">6</button>
  </div>

  <div class="log" id="log"></div>
  <div class="result" id="result"></div>

  <!-- Setup Screen -->
  <div class="popup" id="setupPopup">
    <h2>‚öôÔ∏è Match Setup</h2>
    <label>Overs:
      <select id="oversSelect">
        <option value="1">1 Over</option>
        <option value="2">2 Overs</option>
        <option value="3">3 Overs</option>
        <option value="4">4 Overs</option>
        <option value="5">5 Overs</option>
      </select>
    </label>
    <label>Wickets:
      <select id="wicketsSelect">
        <option value="1">1 Wicket</option>
        <option value="2" selected>2 Wickets</option>
        <option value="3">3 Wickets</option>
        <option value="4">4 Wickets</option>
        <option value="5">5 Wickets</option>
      </select>
    </label>
    <button onclick="startToss()">Start Toss</button>
  </div>

  <!-- Toss Screen -->
  <div class="popup hidden" id="tossPopup">
    <h2>ü™ô Toss Time</h2>
    <p>Choose Heads or Tails</p>
    <button onclick="toss('heads')">Heads</button>
    <button onclick="toss('tails')">Tails</button>
  </div>

  <!-- Bat/Bowl Choice -->
  <div class="popup hidden" id="batBowlPopup">
    <p>You won the toss! Choose:</p>
    <button onclick="setBatting(true)">Bat First</button>
    <button onclick="setBatting(false)">Bowl First</button>
  </div>

  <!-- Popup Message -->
  <div class="popup hidden" id="popup"><p></p><button onclick="closePopup()">Continue</button></div>

  <script>
    let maxOvers = 1, maxBalls = 6, maxWickets = 2;
    let isPlayerBatting = true, gameEnded = false, target = null;

    let playerScore = 0, playerWickets = 0, playerBalls = 0;
    let systemScore = 0, systemWickets = 0, systemBalls = 0;

    const status = document.getElementById('status');
    const scorecard = document.getElementById('scorecard');
    const log = document.getElementById('log');
    const result = document.getElementById('result');

    function formatOvers(balls) {
      return `${Math.floor(balls / 6)}.${balls % 6}`;
    }

    function startToss() {
      maxOvers = parseInt(document.getElementById('oversSelect').value);
      maxBalls = maxOvers * 6;
      maxWickets = parseInt(document.getElementById('wicketsSelect').value);
      document.getElementById('setupPopup').classList.add('hidden');
      document.getElementById('tossPopup').classList.remove('hidden');
    }

    function toss(playerCall) {
      const tossResult = Math.random() < 0.5 ? 'heads' : 'tails';
      if (tossResult === playerCall) {
        document.getElementById('tossPopup').classList.add('hidden');
        document.getElementById('batBowlPopup').classList.remove('hidden');
      } else {
        isPlayerBatting = Math.random() < 0.5;
        document.getElementById('tossPopup').classList.add('hidden');
        showPopup(`Computer Thala won the toss and chose to ${isPlayerBatting ? "bowl" : "bat"} first.`);
      }
    }

    function setBatting(choice) {
      isPlayerBatting = choice;
      document.getElementById('batBowlPopup').classList.add('hidden');
      showPopup(`You chose to ${isPlayerBatting ? "bat" : "bowl"} first.`);
    }

    function showPopup(msg) {
      const popup = document.getElementById('popup');
      popup.querySelector('p').innerText = msg;
      popup.classList.remove('hidden');
    }

    function closePopup() {
      document.getElementById('popup').classList.add('hidden');
      updateUI();
    }

    function getRandom() {
      return Math.floor(Math.random() * 6) + 1;
    }

    function playTurn(playerInput) {
      if (gameEnded || document.querySelector('.popup:not(.hidden)')) return;

      const systemInput = getRandom();

      if (isPlayerBatting) {
        playerBalls++;
        log.innerHTML = `You chose ${playerInput}, Thala chose ${systemInput}`;
        if (playerInput === systemInput) {
          playerWickets++;
          log.innerHTML += `<br><strong>You're OUT! (${playerWickets}/${maxWickets})</strong>`;
        } else {
          playerScore += playerInput;
        }

        if (playerWickets >= maxWickets || playerBalls >= maxBalls) {
          target = playerScore + 1;
          isPlayerBatting = false;
          showPopup(`Your innings over! üéØ Target for Thala: ${target}`);
        }

      } else {
        systemBalls++;
        log.innerHTML = `Thala chose ${systemInput}, You chose ${playerInput}`;
        if (playerInput === systemInput) {
          systemWickets++;
          log.innerHTML += `<br><strong>Thala is OUT! (${systemWickets}/${maxWickets})</strong>`;
        } else {
          systemScore += systemInput;
        }

        if (systemScore >= target) {
          result.innerText = "üíî You Lose!";
          gameEnded = true;
        } else if (systemWickets >= maxWickets || systemBalls >= maxBalls) {
          gameEnded = true;
          if (systemScore < target - 1) result.innerText = "üéâ You Win!";
          else if (systemScore === target - 1) result.innerText = "ü§ù It's a Tie!";
          else result.innerText = "üíî You Lose!";
        }
      }

      updateUI();
    }

    function updateUI() {
      scorecard.innerHTML = `
        Player: ${playerScore}/${playerWickets} (${formatOvers(playerBalls)} overs)<br>
        Computer Thala: ${systemScore}/${systemWickets} (${formatOvers(systemBalls)} overs)
      `;
      status.innerText = gameEnded
        ? "üèÅ Match Over"
        : isPlayerBatting
        ? "üéÆ You are Batting"
        : "ü§ñ Thala is Batting";
    }
  </script>
</body>
</html>
